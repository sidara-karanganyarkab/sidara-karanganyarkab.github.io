import{g as ce,aQ as de,aR as ve,aS as fe,aT as me,aU as pe,aV as he,r as C,B as E,s as b,aW as ge,aX as ke,aY as ye,aZ as Ve,G as z,u as we,av as M,b as n,P as Q,a6 as Ce,D,a3 as be,a1 as Z,a_ as Se,Z as _e,y as Ae,d as L,a$ as Ie,N as G,b0 as Pe,o as De,S as Fe,w as S,V as J,a as W,b1 as Ue}from"./index.a952784d.js";import{U as Re}from"./UsulanDataService.964ed127.js";import{_ as Me}from"./UiParentCard.8ea34135.js";import{V as Te}from"./VSheet.62e00de9.js";import{a as xe,V as Oe}from"./VRow.9eba0281.js";import"./BasicService.24d238b0.js";import"./AuthService.00a71ac6.js";/* empty css              */function Be(e,l,a){if(l==null)return e;if(Array.isArray(l))throw new Error("Multiple matches is not implemented");return typeof l=="number"&&~l?n(Q,null,[n("span",{class:"v-autocomplete__unmask"},[e.substr(0,l)]),n("span",{class:"v-autocomplete__mask"},[e.substr(l,a)]),n("span",{class:"v-autocomplete__unmask"},[e.substr(l+a)])]):e}const Ke=ce()({name:"VAutocomplete",props:{search:String,...de({filterKeys:["title"]}),...ve(),...fe(me({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...pe({transition:!1})},emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,l){let{slots:a}=l;const{t:c}=he(),f=C(),V=C(!1),g=C(!0),N=C(),T=E(e,"menu"),m=b({get:()=>T.value,set:t=>{var u;T.value&&!t&&((u=N.value)==null?void 0:u.\u03A8openChildren)||(T.value=t)}}),s=C(-1),X=b(()=>{var t;return(t=f.value)==null?void 0:t.color}),{items:x,transformIn:Y,transformOut:q}=ge(e),{textColorClasses:ee,textColorStyles:ae}=ke(X),d=E(e,"search",""),h=E(e,"modelValue",[],t=>Y(Pe(t)),t=>{var i;const u=q(t);return e.multiple?u:(i=u[0])!=null?i:null}),_=ye(),{filteredItems:O,getMatches:te}=Ve(e,x,b(()=>g.value?void 0:d.value)),k=b(()=>h.value.map(t=>x.value.find(u=>e.valueComparator(u.value,t.value))||t)),B=b(()=>e.hideSelected?O.value.filter(t=>!k.value.some(u=>u.value===t.value)):O.value),K=b(()=>k.value.map(t=>t.props.value)),$=b(()=>k.value[s.value]),j=C();function le(t){e.openOnClear&&(m.value=!0),d.value=""}function ne(){e.hideNoData&&!x.value.length||e.readonly||(_==null?void 0:_.isReadonly.value)||(m.value=!0)}function ue(t){var F,o,p,w;if(e.readonly||(_==null?void 0:_.isReadonly.value))return;const u=f.value.selectionStart,i=K.value.length;if((s.value>-1||["Enter","ArrowDown","ArrowUp"].includes(t.key))&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(m.value=!0),["Escape"].includes(t.key)&&(m.value=!1),["Enter","Escape","Tab"].includes(t.key)&&(g.value=!0),t.key==="ArrowDown"?(F=j.value)==null||F.focus("next"):t.key==="ArrowUp"&&((o=j.value)==null||o.focus("prev")),!!e.multiple){if(["Backspace","Delete"].includes(t.key)){if(s.value<0){t.key==="Backspace"&&!d.value&&(s.value=i-1);return}const r=s.value;$.value&&I($.value),s.value=r>=i-1?i-2:r}if(t.key==="ArrowLeft"){if(s.value<0&&u>0)return;const r=s.value>-1?s.value-1:i-1;k.value[r]?s.value=r:(s.value=-1,f.value.setSelectionRange((p=d.value)==null?void 0:p.length,(w=d.value)==null?void 0:w.length))}if(t.key==="ArrowRight"){if(s.value<0)return;const r=s.value+1;k.value[r]?s.value=r:(s.value=-1,f.value.setSelectionRange(0,0))}}}function oe(t){d.value=t.target.value}function se(){V.value&&(g.value=!0)}function ie(t){V.value=!0}function re(t){var u;t.relatedTarget==null&&((u=f.value)==null||u.focus())}const A=C(!1);function I(t){if(e.multiple){const u=K.value.findIndex(i=>e.valueComparator(i,t.value));if(u===-1)h.value=[...h.value,t];else{const i=[...h.value];i.splice(u,1),h.value=i}}else h.value=[t],A.value=!0,a.selection||(d.value=t.title),m.value=!1,g.value=!0,G(()=>A.value=!1)}return z(V,t=>{var u,i;t?(A.value=!0,d.value=e.multiple||!!a.selection?"":String((i=(u=k.value.at(-1))==null?void 0:u.props.title)!=null?i:""),g.value=!0,G(()=>A.value=!1)):(m.value=!1,d.value="")}),z(d,t=>{!V.value||A.value||(t&&(m.value=!0),g.value=!t)}),we(()=>{const t=!!(e.chips||a.chip),u=!!(!e.hideNoData||B.value.length||a.prepend||a.append||a["no-data"]),i=h.value.length>0,[F]=M.filterProps(e);return n(M,D({ref:f},F,{modelValue:d.value,"onUpdate:modelValue":o=>{o==null&&(h.value=[])},focused:V.value,"onUpdate:focused":o=>V.value=o,validationValue:h.externalValue,dirty:i,onInput:oe,class:["v-autocomplete",{"v-autocomplete--active-menu":m.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selecting-index":s.value>-1,[`v-autocomplete--${e.multiple?"multiple":"single"}`]:!0,"v-autocomplete--selection-slot":!!a.selection}],appendInnerIcon:e.menuIcon,readonly:e.readonly,placeholder:i?void 0:e.placeholder,"onClick:clear":le,"onMousedown:control":ne,onKeydown:ue}),{...a,default:()=>n(Q,null,[n(Ce,D({ref:N,modelValue:m.value,"onUpdate:modelValue":o=>m.value=o,activator:"parent",contentClass:"v-autocomplete__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:se},e.menuProps),{default:()=>[u&&n(be,{ref:j,selected:K.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:o=>o.preventDefault(),onFocusin:ie,onFocusout:re},{default:()=>{var o,p,w,r;return[!B.value.length&&!e.hideNoData&&((p=(o=a["no-data"])==null?void 0:o.call(a))!=null?p:n(Z,{title:c(e.noDataText)},null)),(w=a["prepend-item"])==null?void 0:w.call(a),B.value.map(v=>{var P,y;return(y=(P=a.item)==null?void 0:P.call(a,{item:v,props:D(v.props,{onClick:()=>I(v)})}))!=null?y:n(Z,D({key:v.value},v.props,{onClick:()=>I(v)}),{prepend:U=>{let{isSelected:R}=U;return e.multiple&&!e.hideSelected?n(Se,{modelValue:R,ripple:!1,tabindex:"-1"},null):void 0},title:()=>{var U,R,H;return g.value?v.title:Be(v.title,(U=te(v))==null?void 0:U.title,(H=(R=d.value)==null?void 0:R.length)!=null?H:0)}})}),(r=a["append-item"])==null?void 0:r.call(a)]}})]}),k.value.map((o,p)=>{var v,P;function w(y){y.stopPropagation(),y.preventDefault(),I(o)}const r={"onClick:close":w,modelValue:!0,"onUpdate:modelValue":void 0};return n("div",{key:o.value,class:["v-autocomplete__selection",p===s.value&&["v-autocomplete__selection--selected",ee.value]],style:p===s.value?ae.value:{}},[t?a.chip?n(Ae,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:o.title}}},{default:()=>{var y;return[(y=a.chip)==null?void 0:y.call(a,{item:o,index:p,props:r})]}}):n(_e,D({key:"chip",closable:e.closableChips,size:"small",text:o.title},r),null):(P=(v=a.selection)==null?void 0:v.call(a,{item:o,index:p}))!=null?P:n("span",{class:"v-autocomplete__selection-text"},[o.title,e.multiple&&p<k.value.length-1&&n("span",{class:"v-autocomplete__selection-comma"},[L(",")])])])})])})}),Ie({isFocused:V,isPristine:g,menu:m,search:d,filteredItems:O,select:I},f)}}),je=L("Kembali"),Ee=L(" submit "),Le=W("br",null,null,-1),Ne={data(){return{kelompoks:[{kode:"123123123123",uraian:"KAKAOAMAO AKOAMA"}],search:"",kelompok:"",jenis:"",kode:"",uraian:"",headers:[{key:"jenis",title:"Jenis"},{key:"kode",title:"Kode"},{key:"uraian",title:"Uraian"}],itemsPerPage:10,serverItems:[],loading:!0,totalItems:0}},watch:{jenis(){this.search=String(Date.now())},kode(){this.search=String(Date.now())},uraian(){this.search=String(Date.now())}},methods:{makeSearch:async(e,l)=>{e||(l.personOptions=[],l.person=""),!l.loadingPerson&&(l.loadingPerson=!0,await Person.where("name",e).get().then(a=>{l.personOptions=a.data}).catch(a=>{l.error="Unknown Error. Please check details and try again.",l.failed()}).finally(()=>l.loadingLearner=!1))},save(){alert(this.search)},customFilter(e,l,a){return console.log(e),console.log(l),console.log(a),!0},loadItems({page:e,itemsPerPage:l,sortBy:a}){this.loading=!0,Re.getAll(e,l,a,{jenis:this.jenis,kode:this.kode,uraian:this.uraian}).then(c=>{this.serverItems=[],c.data.data.forEach(f=>{this.serverItems.push({jenis:f.attributes.jenis,kode:f.attributes.kode,uraian:f.attributes.uraian})}),this.totalItems=c.data.meta.pagination.total,this.loading=!1}).catch(c=>{console.log(c)})}}},Xe=Object.assign(Ne,{setup(e){return(l,a)=>(De(),Fe(Oe,null,{default:S(()=>[n(xe,{cols:"12",md:"12"},{default:S(()=>[n(Me,{title:"Buat Usulan Standar Harga"},{action:S(()=>[n(J,{to:"/usulan-standar-harga",class:"ma-2",color:"warning",density:"default"},{default:S(()=>[je]),_:1})]),default:S(()=>[n(Te,{class:"ma-2"},{default:S(()=>[W("form",{onSubmit:a[3]||(a[3]=Ue((...c)=>l.submit&&l.submit(...c),["prevent"]))},[n(Ke,{"no-filter":"",items:l.kelompoks,"custom-filter":l.customFilter,"item-title":"kode","item-value":"uraian",label:"Kelompok Standar Harga",search:l.search},null,8,["items","custom-filter","search"]),n(M,{modelValue:l.spesifikasi,"onUpdate:modelValue":a[0]||(a[0]=c=>l.spesifikasi=c),label:"Spesifikasi"},null,8,["modelValue"]),n(M,{modelValue:l.harga,"onUpdate:modelValue":a[1]||(a[1]=c=>l.harga=c),label:"Harga"},null,8,["modelValue"]),n(J,{onClick:a[2]||(a[2]=c=>l.save()),color:"success",class:"me-4",type:"submit"},{default:S(()=>[Ee]),_:1})],32),Le]),_:1})]),_:1})]),_:1})]),_:1}))}});export{Xe as default};
