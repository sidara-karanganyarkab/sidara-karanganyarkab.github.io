import{g as me,aQ as ye,aR as be,aS as Ce,aT as Se,aU as we,aV as pe,r as I,B as q,s as b,aW as Ie,aX as Fe,aY as Re,aZ as Pe,G as ue,u as ke,av as J,b as n,P as j,a6 as _e,D as A,a3 as Ae,a1 as de,a_ as Be,Z as he,y as De,d as se,a$ as ge,N as oe,b0 as Ve,b1 as Ue,b2 as ze,b3 as Me,b4 as Te,b5 as ce,b6 as Ne,b7 as $e,b8 as Ee,b9 as ve,ba as Ke,o as xe,S as Le,w as _,V as fe,au as E,bb as Oe,a as je,a7 as He}from"./index.bd533a5e.js";import{U as te}from"./UsulanDataService.d173795f.js";import{_ as Ze}from"./UiParentCard.98902c36.js";import{V as Ge}from"./VSheet.1cf8e90c.js";import{V as Qe}from"./VForm.4537b600.js";import{a as We,V as Xe}from"./VRow.1e41b996.js";import"./BasicService.2d6351de.js";import"./AuthService.5345b2f1.js";/* empty css              */function Ye(e,t,a){if(t==null)return e;if(Array.isArray(t))throw new Error("Multiple matches is not implemented");return typeof t=="number"&&~t?n(j,null,[n("span",{class:"v-autocomplete__unmask"},[e.substr(0,t)]),n("span",{class:"v-autocomplete__mask"},[e.substr(t,a)]),n("span",{class:"v-autocomplete__unmask"},[e.substr(t+a)])]):e}const ne=me()({name:"VAutocomplete",props:{search:String,...ye({filterKeys:["title"]}),...be(),...Ce(Se({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...we({transition:!1})},emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:a}=t;const{t:f}=pe(),v=I(),C=I(!1),c=I(!0),B=I(),K=q(e,"menu"),k=b({get:()=>K.value,set:l=>{var s;K.value&&!l&&((s=B.value)==null?void 0:s.\u03A8openChildren)||(K.value=l)}}),i=I(-1),H=b(()=>{var l;return(l=v.value)==null?void 0:l.color}),{items:N,transformIn:x,transformOut:ee}=Ie(e),{textColorClasses:Z,textColorStyles:G}=Fe(H),r=q(e,"search",""),h=q(e,"modelValue",[],l=>x(Ve(l)),l=>{var d;const s=ee(l);return e.multiple?s:(d=s[0])!=null?d:null}),R=Re(),{filteredItems:L,getMatches:Q}=Pe(e,N,b(()=>c.value?void 0:r.value)),S=b(()=>h.value.map(l=>N.value.find(s=>e.valueComparator(s.value,l.value))||l)),u=b(()=>e.hideSelected?L.value.filter(l=>!S.value.some(s=>s.value===l.value)):L.value),m=b(()=>S.value.map(l=>l.props.value)),V=b(()=>S.value[i.value]),F=I();function ie(l){e.openOnClear&&(k.value=!0),r.value=""}function le(){e.hideNoData&&!N.value.length||e.readonly||(R==null?void 0:R.isReadonly.value)||(k.value=!0)}function ae(l){var T,o,g,w;if(e.readonly||(R==null?void 0:R.isReadonly.value))return;const s=v.value.selectionStart,d=m.value.length;if((i.value>-1||["Enter","ArrowDown","ArrowUp"].includes(l.key))&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(k.value=!0),["Escape"].includes(l.key)&&(k.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(c.value=!0),l.key==="ArrowDown"?(T=F.value)==null||T.focus("next"):l.key==="ArrowUp"&&((o=F.value)==null||o.focus("prev")),!!e.multiple){if(["Backspace","Delete"].includes(l.key)){if(i.value<0){l.key==="Backspace"&&!r.value&&(i.value=d-1);return}const p=i.value;V.value&&M(V.value),i.value=p>=d-1?d-2:p}if(l.key==="ArrowLeft"){if(i.value<0&&s>0)return;const p=i.value>-1?i.value-1:d-1;S.value[p]?i.value=p:(i.value=-1,v.value.setSelectionRange((g=r.value)==null?void 0:g.length,(w=r.value)==null?void 0:w.length))}if(l.key==="ArrowRight"){if(i.value<0)return;const p=i.value+1;S.value[p]?i.value=p:(i.value=-1,v.value.setSelectionRange(0,0))}}}function D(l){r.value=l.target.value}function $(){C.value&&(c.value=!0)}function U(l){C.value=!0}function W(l){var s;l.relatedTarget==null&&((s=v.value)==null||s.focus())}const z=I(!1);function M(l){if(e.multiple){const s=m.value.findIndex(d=>e.valueComparator(d,l.value));if(s===-1)h.value=[...h.value,l];else{const d=[...h.value];d.splice(s,1),h.value=d}}else h.value=[l],z.value=!0,a.selection||(r.value=l.title),k.value=!1,c.value=!0,oe(()=>z.value=!1)}return ue(C,l=>{var s,d;l?(z.value=!0,r.value=e.multiple||!!a.selection?"":String((d=(s=S.value.at(-1))==null?void 0:s.props.title)!=null?d:""),c.value=!0,oe(()=>z.value=!1)):(k.value=!1,r.value="")}),ue(r,l=>{!C.value||z.value||(l&&(k.value=!0),c.value=!l)}),ke(()=>{const l=!!(e.chips||a.chip),s=!!(!e.hideNoData||u.value.length||a.prepend||a.append||a["no-data"]),d=h.value.length>0,[T]=J.filterProps(e);return n(J,A({ref:v},T,{modelValue:r.value,"onUpdate:modelValue":o=>{o==null&&(h.value=[])},focused:C.value,"onUpdate:focused":o=>C.value=o,validationValue:h.externalValue,dirty:d,onInput:D,class:["v-autocomplete",{"v-autocomplete--active-menu":k.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selecting-index":i.value>-1,[`v-autocomplete--${e.multiple?"multiple":"single"}`]:!0,"v-autocomplete--selection-slot":!!a.selection}],appendInnerIcon:e.menuIcon,readonly:e.readonly,placeholder:d?void 0:e.placeholder,"onClick:clear":ie,"onMousedown:control":le,onKeydown:ae}),{...a,default:()=>n(j,null,[n(_e,A({ref:B,modelValue:k.value,"onUpdate:modelValue":o=>k.value=o,activator:"parent",contentClass:"v-autocomplete__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:$},e.menuProps),{default:()=>[s&&n(Ae,{ref:F,selected:m.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:o=>o.preventDefault(),onFocusin:U,onFocusout:W},{default:()=>{var o,g,w,p;return[!u.value.length&&!e.hideNoData&&((g=(o=a["no-data"])==null?void 0:o.call(a))!=null?g:n(de,{title:f(e.noDataText)},null)),(w=a["prepend-item"])==null?void 0:w.call(a),u.value.map(y=>{var O,P;return(P=(O=a.item)==null?void 0:O.call(a,{item:y,props:A(y.props,{onClick:()=>M(y)})}))!=null?P:n(de,A({key:y.value},y.props,{onClick:()=>M(y)}),{prepend:X=>{let{isSelected:Y}=X;return e.multiple&&!e.hideSelected?n(Be,{modelValue:Y,ripple:!1,tabindex:"-1"},null):void 0},title:()=>{var X,Y,re;return c.value?y.title:Ye(y.title,(X=Q(y))==null?void 0:X.title,(re=(Y=r.value)==null?void 0:Y.length)!=null?re:0)}})}),(p=a["append-item"])==null?void 0:p.call(a)]}})]}),S.value.map((o,g)=>{var y,O;function w(P){P.stopPropagation(),P.preventDefault(),M(o)}const p={"onClick:close":w,modelValue:!0,"onUpdate:modelValue":void 0};return n("div",{key:o.value,class:["v-autocomplete__selection",g===i.value&&["v-autocomplete__selection--selected",Z.value]],style:g===i.value?G.value:{}},[l?a.chip?n(De,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:o.title}}},{default:()=>{var P;return[(P=a.chip)==null?void 0:P.call(a,{item:o,index:g,props:p})]}}):n(he,A({key:"chip",closable:e.closableChips,size:"small",text:o.title},p),null):(O=(y=a.selection)==null?void 0:y.call(a,{item:o,index:g}))!=null?O:n("span",{class:"v-autocomplete__selection-text"},[o.title,e.multiple&&g<S.value.length-1&&n("span",{class:"v-autocomplete__selection-comma"},[se(",")])])])})])})}),ge({isFocused:C,isPristine:c,menu:k,search:r,filteredItems:L,select:M},v)}});const qe=me()({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...Ue({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>Ve(e).every(t=>t!=null&&typeof t=="object")},...ze({clearable:!0})},emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:a,emit:f,slots:v}=t;const{t:C}=pe(),c=q(e,"modelValue"),{isFocused:B,focus:K,blur:k}=Me(e),i=b(()=>typeof e.showSize!="boolean"?e.showSize:void 0),H=b(()=>{var u;return((u=c.value)!=null?u:[]).reduce((m,V)=>{let{size:F=0}=V;return m+F},0)}),N=b(()=>ve(H.value,i.value)),x=b(()=>{var u;return((u=c.value)!=null?u:[]).map(m=>{const{name:V="",size:F=0}=m;return e.showSize?`${V} (${ve(F,i.value)})`:V})}),ee=b(()=>{var m,V;const u=(V=(m=c.value)==null?void 0:m.length)!=null?V:0;return e.showSize?C(e.counterSizeString,u,N.value):C(e.counterString,u)}),Z=I(),G=I(),r=I();function h(){var u;r.value!==document.activeElement&&((u=r.value)==null||u.focus()),B.value||K()}function R(u){Q(u)}function L(u){f("mousedown:control",u)}function Q(u){var m;(m=r.value)==null||m.click(),f("click:control",u)}function S(u){u.stopPropagation(),h(),oe(()=>{c.value=[],Ke(e["onClick:clear"],u)})}return ue(c,u=>{(!Array.isArray(u)||!u.length)&&r.value&&(r.value.value="")}),ke(()=>{const u=!!(v.counter||e.counter),m=!!(u||v.details),[V,F]=Te(a),[{modelValue:ie,...le}]=ce.filterProps(e),[ae]=Ne(e);return n(ce,A({ref:Z,modelValue:c.value,"onUpdate:modelValue":D=>c.value=D,class:"v-file-input","onClick:prepend":R},V,le,{focused:B.value}),{...v,default:D=>{let{id:$,isDisabled:U,isDirty:W,isReadonly:z,isValid:M}=D;return n($e,A({ref:G,"prepend-icon":e.prependIcon,onMousedown:L,onClick:Q,"onClick:clear":S,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ae,{id:$.value,active:W.value||B.value,dirty:W.value,disabled:U.value,focused:B.value,error:M.value===!1}),{...v,default:l=>{var T;let{props:{class:s,...d}}=l;return n(j,null,[n("input",A({ref:r,type:"file",readonly:z.value,disabled:U.value,multiple:e.multiple,name:e.name,onClick:o=>{o.stopPropagation(),h()},onChange:o=>{var w;if(!o.target)return;const g=o.target;c.value=[...(w=g.files)!=null?w:[]]},onFocus:h,onBlur:k},d,F),null),n("div",{class:s},[!!((T=c.value)!=null&&T.length)&&(v.selection?v.selection({fileNames:x.value,totalBytes:H.value,totalBytesReadable:N.value}):e.chips?x.value.map(o=>n(he,{key:o,size:"small",color:e.color},{default:()=>[o]})):x.value.join(", "))])])}})},details:m?D=>{var $,U;return n(j,null,[($=v.details)==null?void 0:$.call(v,D),u&&n(j,null,[n("span",null,null),n(Ee,{active:!!((U=c.value)!=null&&U.length),value:ee.value},v.counter)])])}:void 0})}),ge({},Z,G,r)}}),Je=se("Kembali"),el=se(" submit "),ll=je("br",null,null,-1),al={data(){return{form:!1,loading:!1,kelompoks:[],satuans:[],rekenings:[],kelompok:"",satuan:"",rekening:"",spesifikasi:"",harga:""}},methods:{loadKelompok(){te.getKelompok().then(e=>{this.kelompoks=[];for(const t of e.data.data)this.kelompoks.push({value:t.id,title:t.attributes.kode+" - "+t.attributes.uraian})})},loadSatuan(){te.getSatuan().then(e=>{this.satuans=[];for(const t of e.data.data)this.satuans.push({value:t.id,title:t.attributes.satuan+""})})},loadRekening(){te.getRekening().then(e=>{this.rekenings=[];for(const t of e.data.data)this.rekenings.push({value:t.id,title:t.attributes.kode+" - "+t.attributes.uraian})})},submit(){this.loading=!0,this.UsulanDataService.add({kelompok:this.kelompok,kode_rekening:this.rekening,id_satuan:this.satuan,spesifikasi:this.spesifikasi,harga:this.harga}).then(e=>{this.loading=!1,console.log(e),e&&e.status==200&&He.push("/usulan-standar-harga")})}},mounted(){this.loadKelompok(),this.loadSatuan(),this.loadRekening()}},vl=Object.assign(al,{setup(e){return(t,a)=>(xe(),Le(Xe,null,{default:_(()=>[n(We,{cols:"12",md:"12"},{default:_(()=>[n(Ze,{title:"Buat Usulan Standar Harga"},{action:_(()=>[n(fe,{to:"/usulan-standar-harga",class:"ma-2",color:"warning",density:"default"},{default:_(()=>[Je]),_:1})]),default:_(()=>[n(Ge,{class:"ma-2"},{default:_(()=>[n(Qe,{modelValue:t.form,"onUpdate:modelValue":a[5]||(a[5]=f=>E(form)?form.value=f:null),onSubmit:Oe(t.submit,["prevent"])},{default:_(()=>[n(ne,{modelValue:t.kelompok,"onUpdate:modelValue":a[0]||(a[0]=f=>E(kelompok)?kelompok.value=f:null),items:t.kelompoks,"item-title":"title","item-value":"value",label:"Kelompok Standar Harga"},null,8,["modelValue","items"]),n(J,{modelValue:t.spesifikasi,"onUpdate:modelValue":a[1]||(a[1]=f=>E(spesifikasi)?spesifikasi.value=f:null),label:"Spesifikasi"},null,8,["modelValue"]),n(ne,{modelValue:t.satuan,"onUpdate:modelValue":a[2]||(a[2]=f=>E(satuan)?satuan.value=f:null),items:t.satuans,"item-title":"title","item-value":"value",label:"Satuan"},null,8,["modelValue","items"]),n(J,{modelValue:t.harga,"onUpdate:modelValue":a[3]||(a[3]=f=>E(harga)?harga.value=f:null),type:"number",step:"any",min:"1",label:"Harga"},null,8,["modelValue"]),n(ne,{modelValue:t.rekening,"onUpdate:modelValue":a[4]||(a[4]=f=>E(rekening)?rekening.value=f:null),items:t.rekenings,"item-title":"title","item-value":"value",label:"Rekening Belanja"},null,8,["modelValue","items"]),n(qe,{accept:".pdf",label:"File input"}),n(fe,{loading:t.loading,disabled:!t.form,color:"success",class:"me-4",type:"submit"},{default:_(()=>[el]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","onSubmit"]),ll]),_:1})]),_:1})]),_:1})]),_:1}))}});export{vl as default};
