import{g as re,aQ as de,aR as ce,aS as ve,aT as me,aU as fe,aV as ne,r as y,C as W,aW as pe,aX as ke,s as C,I as J,u as ue,aY as ge,b as a,R as H,a8 as he,D as R,a5 as Ve,a3 as ee,aZ as be,x as Ce,$ as oe,d as x,ax as Z,a_ as se,P as q,a$ as ie,G as ye,b0 as Se,b1 as Ie,b2 as Fe,b3 as _e,b4 as we,b5 as Pe,b6 as Be,b7 as De,b8 as le,b9 as ae,o as Re,W as Ae,w as F,V as te,aw as K,ba as Ue,a as $e,a9 as ze}from"./index.fa88f1bf.js";import{U as X}from"./UsulanDataService.91c5946e.js";import{_ as Te}from"./UiParentCard.f1125c3a.js";import{V as Ke}from"./VSheet.eb540cf0.js";import{V as Ne}from"./VForm.d5fcb38f.js";import{a as Ee,V as Me}from"./VRow.48645a00.js";import"./BasicService.a832d833.js";import"./AuthService.5cd25173.js";/* empty css              */function He(e,l,n){if(l==null)return e;if(Array.isArray(l))throw new Error("Multiple matches is not implemented");return typeof l=="number"&&~l?a(H,null,[a("span",{class:"v-autocomplete__unmask"},[e.substr(0,l)]),a("span",{class:"v-autocomplete__mask"},[e.substr(l,n)]),a("span",{class:"v-autocomplete__unmask"},[e.substr(l+n)])]):e}const Y=re()({name:"VAutocomplete",props:{search:String,...de({filterKeys:["title"]}),...ce(),...ve(me({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...fe({transition:!1})},emits:{"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,l){let{slots:n}=l;const{t:r}=ne(),m=y(),b=y(!1),i=y(!0),c=W(e,"menu"),{items:A,transformIn:L,transformOut:N}=pe(e),f=W(e,"search",""),p=W(e,"modelValue",[],t=>L(ie(t)),t=>{var s;const o=N(t);return e.multiple?o:(s=o[0])!=null?s:null}),{filteredItems:U,getMatches:S}=ke(e,A,C(()=>i.value?void 0:f.value)),k=C(()=>p.value.map(t=>A.value.find(o=>e.valueComparator(o.value,t.value))||t)),O=C(()=>k.value.map(t=>t.props.value)),_=y();function G(t){p.value=[],e.openOnClear&&(c.value=!0),f.value=""}function E(){e.hideNoData&&!A.value.length||e.readonly||(c.value=!0)}function Q(t){if(!e.readonly){if(["Enter","ArrowDown"].includes(t.key)&&(c.value=!0),["Escape"].includes(t.key)&&(c.value=!1),["Enter","Escape","Tab"].includes(t.key)&&(i.value=!0),t.key==="ArrowDown"){var o;t.preventDefault(),(o=_.value)==null||o.focus("next")}else if(t.key==="ArrowUp"){var s;t.preventDefault(),(s=_.value)==null||s.focus("prev")}}}function u(t){f.value=t.target.value}function g(){b.value&&(i.value=!0)}function V(t){b.value=!0}function w(t){if(t.relatedTarget==null){var o;(o=m.value)==null||o.focus()}}const $=y(!1);function z(t){if(e.multiple){const o=O.value.findIndex(s=>s===t.value);if(o===-1)p.value=[...p.value,t],f.value="";else{const s=[...p.value];s.splice(o,1),p.value=s}}else p.value=[t],$.value=!0,n.selection||(f.value=t.title),c.value=!1,i.value=!0,q(()=>$.value=!1)}return J(b,t=>{var s;if(t){var o;$.value=!0,f.value=e.multiple||!!n.selection?"":String((s=(o=k.value.at(-1))==null?void 0:o.props.title)!=null?s:""),i.value=!0,q(()=>$.value=!1)}else c.value=!1,f.value=""}),J(f,t=>{!b.value||$.value||(t&&(c.value=!0),i.value=!t)}),ue(()=>{const t=!!(e.chips||n.chip),[o]=ge(e);return a(Z,R({ref:m},o,{modelValue:f.value,"onUpdate:modelValue":s=>{s==null&&(p.value=[])},validationValue:p.externalValue,dirty:p.value.length>0,onInput:u,class:["v-autocomplete",{"v-autocomplete--active-menu":c.value,"v-autocomplete--chips":!!e.chips,[`v-autocomplete--${e.multiple?"multiple":"single"}`]:!0,"v-autocomplete--selection-slot":!!n.selection}],appendInnerIcon:e.menuIcon,readonly:e.readonly,"onClick:clear":G,"onClick:control":E,"onClick:input":E,onFocus:()=>b.value=!0,onBlur:()=>b.value=!1,onKeydown:Q}),{...n,default:()=>{var s,I,j;return a(H,null,[a(he,R({modelValue:c.value,"onUpdate:modelValue":d=>c.value=d,activator:"parent",contentClass:"v-autocomplete__content",eager:e.eager,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:g},e.menuProps),{default:()=>[a(Ve,{ref:_,selected:O.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:d=>d.preventDefault(),onFocusin:V,onFocusout:w},{default:()=>{var d;return[!U.value.length&&!e.hideNoData&&((d=(s=n["no-data"])==null?void 0:s.call(n))!=null?d:a(ee,{title:r(e.noDataText)},null)),(I=n["prepend-item"])==null?void 0:I.call(n),U.value.map((v,P)=>{var D;var B;return(D=(B=n.item)==null?void 0:B.call(n,{item:v,index:P,props:R(v.props,{onClick:()=>z(v)})}))!=null?D:a(ee,R({key:P},v.props,{onClick:()=>z(v)}),{prepend:h=>{let{isSelected:T}=h;return e.multiple&&!e.hideSelected?a(be,{modelValue:T,ripple:!1},null):void 0},title:()=>{var M;var h,T;return i.value?v.title:He(v.title,(h=S(v))==null?void 0:h.title,(M=(T=f.value)==null?void 0:T.length)!=null?M:0)}})}),(j=n["append-item"])==null?void 0:j.call(n)]}})]}),k.value.map((d,v)=>{function P(D){D.stopPropagation(),D.preventDefault(),z(d)}const B={"onClick:close":P,modelValue:!0,"onUpdate:modelValue":void 0};return a("div",{key:d.value,class:"v-autocomplete__selection"},[t?a(Ce,{defaults:{VChip:{closable:e.closableChips,size:"small",text:d.title}}},{default:()=>[n.chip?n.chip({item:d,index:v,props:B}):a(oe,B,null)]}):n.selection?n.selection({item:d,index:v}):a("span",{class:"v-autocomplete__selection-text"},[d.title,e.multiple&&v<k.value.length-1&&a("span",{class:"v-autocomplete__selection-comma"},[x(",")])])])})])}})}),se({isFocused:b,isPristine:i,menu:c,search:f,filteredItems:U,select:z},m)}});const Le=ye({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...Se({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ie(e).every(l=>l!=null&&typeof l=="object")},...Ie({clearable:!0})},emits:{"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,l){let{attrs:n,emit:r,slots:m}=l;const{t:b}=ne(),i=W(e,"modelValue"),c=C(()=>typeof e.showSize!="boolean"?e.showSize:void 0),A=C(()=>{var u;return((u=i.value)!=null?u:[]).reduce((g,V)=>{let{size:w=0}=V;return g+w},0)}),L=C(()=>le(A.value,c.value)),N=C(()=>{var u;return((u=i.value)!=null?u:[]).map(g=>{const{name:V="",size:w=0}=g;return e.showSize?`${V} (${le(w,c.value)})`:V})}),f=C(()=>{var V;var u;const g=(V=(u=i.value)==null?void 0:u.length)!=null?V:0;return e.showSize?b(e.counterSizeString,g,L.value):b(e.counterString,g)}),p=y(),U=y(),S=y(!1),k=y(),O=C(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function _(){if(k.value!==document.activeElement){var u;(u=k.value)==null||u.focus()}S.value||(S.value=!0)}function G(u){ae(e["onClick:prepend"],u),E(u)}function E(u){var g;(g=k.value)==null||g.click(),r("click:control",u)}function Q(u){u.stopPropagation(),_(),q(()=>{i.value=[],k!=null&&k.value&&(k.value.value=""),ae(e["onClick:clear"],u)})}return ue(()=>{const u=!!(m.counter||e.counter),g=!!(u||m.details),[V,w]=Fe(n),[{modelValue:$,...z}]=_e(e),[t]=we(e);return a(De,R({ref:p,modelValue:i.value,"onUpdate:modelValue":o=>i.value=o,class:"v-file-input","onClick:prepend":G,"onClick:append":e["onClick:append"]},V,z,{focused:S.value,messages:O.value}),{...m,default:o=>{let{isDisabled:s,isDirty:I,isReadonly:j,isValid:d}=o;return a(Pe,R({ref:U,"prepend-icon":e.prependIcon,"onClick:control":E,"onClick:clear":Q,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},t,{active:I.value||S.value,dirty:I.value,focused:S.value,error:d.value===!1}),{...m,default:v=>{var P;let{props:{class:B,...D}}=v;return a(H,null,[a("input",R({ref:k,type:"file",readonly:j.value,disabled:s.value,multiple:e.multiple,name:e.name,onClick:h=>{h.stopPropagation(),_()},onChange:h=>{var M;if(!h.target)return;const T=h.target;i.value=[...(M=T.files)!=null?M:[]]},onFocus:_,onBlur:()=>S.value=!1},D,w),null),a("div",{class:B},[!!((P=i.value)!=null&&P.length)&&(m.selection?m.selection({fileNames:N.value,totalBytes:A.value,totalBytesReadable:L.value}):e.chips?N.value.map(h=>a(oe,{key:h,size:"small",color:e.color},{default:()=>[h]})):N.value.join(", "))])])}})},details:g?o=>{var s,I;return a(H,null,[(s=m.details)==null?void 0:s.call(m,o),u&&a(H,null,[a("span",null,null),a(Be,{active:!!((I=i.value)!=null&&I.length),value:f.value},m.counter)])])}:void 0})}),se({},p,U,k)}}),Oe=x("Kembali"),je=x(" submit "),We=$e("br",null,null,-1),Ge={data(){return{form:!1,loading:!1,kelompoks:[],satuans:[],rekenings:[],kelompok:"",satuan:"",rekening:"",spesifikasi:"",harga:""}},methods:{loadKelompok(){X.getKelompok().then(e=>{this.kelompoks=[];for(const l of e.data.data)this.kelompoks.push({value:l.id,title:l.attributes.kode+" - "+l.attributes.uraian})})},loadSatuan(){X.getSatuan().then(e=>{this.satuans=[];for(const l of e.data.data)this.satuans.push({value:l.id,title:l.attributes.satuan+""})})},loadRekening(){X.getRekening().then(e=>{this.rekenings=[];for(const l of e.data.data)this.rekenings.push({value:l.id,title:l.attributes.kode+" - "+l.attributes.uraian})})},submit(){this.loading=!0,this.UsulanDataService.add({kelompok:this.kelompok,kode_rekening:this.rekening,id_satuan:this.satuan,spesifikasi:this.spesifikasi,harga:this.harga}).then(e=>{this.loading=!1,console.log(e),e&&e.status==200&&ze.push("/usulan-standar-harga")})}},mounted(){this.loadKelompok(),this.loadSatuan(),this.loadRekening()}},al=Object.assign(Ge,{setup(e){return(l,n)=>(Re(),Ae(Me,null,{default:F(()=>[a(Ee,{cols:"12",md:"12"},{default:F(()=>[a(Te,{title:"Buat Usulan Standar Harga"},{action:F(()=>[a(te,{to:"/usulan-standar-harga",class:"ma-2",color:"warning",density:"default"},{default:F(()=>[Oe]),_:1})]),default:F(()=>[a(Ke,{class:"ma-2"},{default:F(()=>[a(Ne,{modelValue:l.form,"onUpdate:modelValue":n[5]||(n[5]=r=>K(form)?form.value=r:null),onSubmit:Ue(l.submit,["prevent"])},{default:F(()=>[a(Y,{modelValue:l.kelompok,"onUpdate:modelValue":n[0]||(n[0]=r=>K(kelompok)?kelompok.value=r:null),items:l.kelompoks,"item-title":"title","item-value":"value",label:"Kelompok Standar Harga"},null,8,["modelValue","items"]),a(Z,{modelValue:l.spesifikasi,"onUpdate:modelValue":n[1]||(n[1]=r=>K(spesifikasi)?spesifikasi.value=r:null),label:"Spesifikasi"},null,8,["modelValue"]),a(Y,{modelValue:l.satuan,"onUpdate:modelValue":n[2]||(n[2]=r=>K(satuan)?satuan.value=r:null),items:l.satuans,"item-title":"title","item-value":"value",label:"Satuan"},null,8,["modelValue","items"]),a(Z,{modelValue:l.harga,"onUpdate:modelValue":n[3]||(n[3]=r=>K(harga)?harga.value=r:null),type:"number",step:"any",min:"1",label:"Harga"},null,8,["modelValue"]),a(Y,{modelValue:l.rekening,"onUpdate:modelValue":n[4]||(n[4]=r=>K(rekening)?rekening.value=r:null),items:l.rekenings,"item-title":"title","item-value":"value",label:"Rekening Belanja"},null,8,["modelValue","items"]),a(Le,{accept:".pdf",label:"File input"}),a(te,{loading:l.loading,disabled:!l.form,color:"success",class:"me-4",type:"submit"},{default:F(()=>[je]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","onSubmit"]),We]),_:1})]),_:1})]),_:1})]),_:1}))}});export{al as default};
